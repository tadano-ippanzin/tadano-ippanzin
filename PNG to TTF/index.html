<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PNG to TTF Maker</title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 20px auto; padding: 0 20px; background: #f4f4f9; }
        .upload-section { border: 2px dashed #ccc; padding: 40px; text-align: center; background: white; border-radius: 8px; cursor: pointer; }
        #editor-container { margin-top: 20px; }
        .char-card { display: flex; align-items: center; background: white; padding: 15px; margin-bottom: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .char-card img { width: 64px; height: 64px; object-fit: contain; margin-right: 20px; border: 1px solid #eee; }
        .char-card input { font-size: 24px; width: 60px; text-align: center; padding: 5px; border: 1px solid #ddd; border-radius: 4px; }
        .controls { margin-top: 30px; text-align: center; }
        button { padding: 10px 25px; font-size: 18px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 5px; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>

    <h2>ğŸ¨ PNG to TTF ãƒ•ã‚©ãƒ³ãƒˆãƒ¡ãƒ¼ã‚«ãƒ¼</h2>
    <p>PNGç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã€å¯¾å¿œã™ã‚‹æ–‡å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>

    <div class="upload-section" onclick="document.getElementById('image-input').click()">
        <p>ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è¤‡æ•°ã®PNGã‚’é¸æŠ</p>
        <input type="file" id="image-input" multiple accept="image/png" style="display:none">
    </div>

    <div id="editor-container"></div>

    <div class="controls">
        <input type="text" id="font-name" placeholder="ãƒ•ã‚©ãƒ³ãƒˆåã‚’å…¥åŠ›" value="MyCustomFont">
        <button id="generate-btn">TTFãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆ</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/opentype.js@latest/dist/opentype.min.js"></script>

    <script>
        const imageInput = document.getElementById('image-input');
        const editorContainer = document.getElementById('editor-container');
        const generateBtn = document.getElementById('generate-btn');

        // ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹é…åˆ—
        let glyphData = [];

        // ç”»åƒãŒé¸æŠã•ã‚ŒãŸæ™‚ã®å‡¦ç†
        imageInput.addEventListener('change', (e) => {
            const files = Array.from(e.target.files);
            
            files.forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = (event) => {
                    const dataUrl = event.target.result;
                    createCard(dataUrl, file.name);
                };
                reader.readAsDataURL(file);
            });
        });

        // UIã‚«ãƒ¼ãƒ‰ã®ä½œæˆ
        function createCard(src, fileName) {
            const card = document.createElement('div');
            card.className = 'char-card';
            
            // ãƒ•ã‚¡ã‚¤ãƒ«åã‹ã‚‰åˆæœŸå€¤ã‚’æ¨æ¸¬ï¼ˆä¾‹: A.png ãªã‚‰ 'A'ï¼‰
            const defaultChar = fileName.split('.')[0][0] || '';

            card.innerHTML = `
                <img src="${src}">
                <div>
                    <label>å‰²ã‚Šå½“ã¦ã‚‹æ–‡å­—: </label>
                    <input type="text" class="char-input" maxlength="1" value="${defaultChar}">
                    <span style="color: #888; margin-left: 10px;">(${fileName})</span>
                </div>
            `;
            editorContainer.appendChild(card);
        }

        // TTFç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ï¼ˆéª¨çµ„ã¿ï¼‰
        generateBtn.addEventListener('click', () => {
            const fontName = document.getElementById('font-name').value;
            const cards = document.querySelectorAll('.char-card');
            
            if (cards.length === 0) return alert('ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„');

            // ã“ã“ã§ opentype.js ã‚’ä½¿ã£ã¦ãƒ•ã‚©ãƒ³ãƒˆã‚’çµ„ã¿ç«‹ã¦ã‚‹
            // 1. ç”»åƒã‚’Canvasã§è§£æã—ã¦ãƒ‘ã‚¹ã‚’å–å¾— (Potraceç­‰ãŒå¿…è¦)
            // 2. ãƒ‘ã‚¹ã‚’ã‚°ãƒªãƒ•ã«å¤‰æ›
            // 3. ãƒ•ã‚©ãƒ³ãƒˆã¨ã—ã¦æ›¸ãå‡ºã—
            
            alert(fontName + ' ã®ç”Ÿæˆã‚’é–‹å§‹ã—ã¾ã™ï¼ˆå®Ÿéš›ã®ãƒ‘ã‚¹å¤‰æ›ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ¬¡ã«çµ„ã¿è¾¼ã¿ã¾ã™ï¼‰');
            console.log('ç”Ÿæˆå¯¾è±¡ã®ã‚«ãƒ¼ãƒ‰æ•°:', cards.length);
        });
    </script>
</body>
</html>
