<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gearOtad - ã‚®ã‚¢ã‚ªã‚¿ãƒƒãƒ‰æš—å·</title>
    <link rel="icon" href="https://assets.st-note.com/img/1766740914-5chXSxNAGbfo69q2YEz70pn1.png?width=500&height=500&fit=crop" type="image/png">
    <style>
        :root { --val: 30; }
        
        body { 
            font-family: 'Segoe UI', sans-serif; 
            text-align: center; 
            padding: 20px; 
            background-color: rgb(var(--val), var(--val), var(--val)); 
            color: rgb(calc(255 - var(--val)), calc(255 - var(--val)), calc(255 - var(--val))); 
            transition: background-color 0.3s, color 0.3s; 
            margin: 0; 
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* èƒŒæ™¯ã®å·¨å¤§æ­¯è»Š */
        .bg-gear {
            position: fixed;
            bottom: -10vmin;
            right: -10vmin;
            font-size: 80vmin;
            z-index: -1;
            opacity: 0.05;
            user-select: none;
            pointer-events: none;
            color: rgb(calc(255 - var(--val)), calc(255 - var(--val)), calc(255 - var(--val)));
            animation: spin 60s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .mode-slider-container { margin: 10px 0 20px 0; display: flex; align-items: center; justify-content: center; gap: 10px; font-weight: bold; }
        input[type="range"] { width: 200px; cursor: pointer; accent-color: #6f42c1; }

        .container { 
            max-width: 600px; 
            margin: auto; 
            padding: 30px 20px; 
            border-radius: 16px; 
            background-color: rgba(calc(var(--val) + 15), calc(var(--val) + 15), calc(var(--val) + 15), 0.85); 
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.4); 
            border: 1px solid rgba(128,128,128,0.2); 
        }

        .logo-wrapper { margin-bottom: 20px; }
        .main-logo {
            max-width: 350px;
            width: 95%;
            height: auto;
            filter: drop-shadow(0 0 10px rgba(255,255,255, calc((255 - var(--val)) / 1200)));
            transition: filter 0.3s ease;
        }

        textarea { 
            width: 95%; height: 120px; margin: 15px auto; padding: 15px; border-radius: 8px; font-size: 16px; box-sizing: border-box; display: block; 
            background-color: rgba(calc(var(--val) - 10), calc(var(--val) - 10), calc(var(--val) - 10), 0.9); 
            color: rgb(calc(255 - var(--val)), calc(255 - var(--val)), calc(255 - var(--val))); 
            border: 2px solid rgba(128,128,128,0.3); 
            transition: 0.2s;
            resize: vertical;
        }

        .btn-group { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        button { 
            padding: 12px 18px; font-size: 15px; cursor: pointer; border: none; border-radius: 8px; 
            background-color: #007bff; color: white; transition: 0.2s; font-weight: bold; 
        }
        button:hover { transform: translateY(-2px); filter: brightness(1.1); }
        
        .swap-btn { background-color: #6f42c1; } 
        .copy-btn { background-color: #28a745; } 
        .tweet-btn { background-color: #000000; border: 1px solid #555; } 
        .delete-btn { background-color: #dc3545; }
        
        .label { font-weight: bold; display: block; margin-top: 15px; text-align: left; margin-left: 2.5%; font-size: 0.9em; opacity: 0.8; }
        hr { border: 0; border-top: 1px solid rgba(128,128,128,0.3); margin: 25px 0; }
        .counter { text-align: right; font-size: 12px; margin-right: 2.5%; margin-top: -8px; margin-bottom: 10px; opacity: 0.7; }
        .diff-counter { font-family: monospace; font-weight: bold; }
    </style>
</head>
<body>
    <div class="bg-gear" id="gear">âš™ï¸</div>

    <div class="mode-slider-container">
        <span>ãƒ€ãƒ¼ã‚¯ã‚µã‚¤ãƒ‰</span>
        <input type="range" id="themeSlider" min="30" max="250" value="30" oninput="updateTheme(this.value)">
        <span>ãƒ©ã‚¤ãƒˆã‚µã‚¤ãƒ‰</span>
    </div>

    <div class="container">
        <div class="logo-wrapper">
            <img src="https://assets.st-note.com/production/uploads/images/239016490/rectangle_large_type_2_c160e3917400173cbde2ae9e19b03d89.png?width=2000&height=2000&fit=bounds&quality=85" alt="gearOtad" class="main-logo">
        </div>

        <span class="label">å…¥åŠ›:</span>
        <textarea id="inputText" placeholder="ã“ã“ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›..." oninput="updateCounter()"></textarea>
        <div id="charCount" class="counter">0 æ–‡å­—</div>
        
        <div class="btn-group">
            <button onclick="process('encrypt')">æš—å·åŒ–</button>
            <button onclick="process('decrypt')">å¾©å·åŒ–</button>
            <button class="swap-btn" onclick="swapText()">å…¥ã‚Œæ›ãˆã‚‹ &#x1F503;</button>
        </div>
        
        <hr>
        
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0 2.5%;">
            <span class="label" style="margin-left: 0;">çµæœ:</span>
            <span id="diffDisplay" class="diff-counter" style="color: gray; margin-top: 15px;">Â±0</span>
        </div>
        <textarea id="outputText" readonly placeholder="çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™..."></textarea>
        
        <div class="btn-group">
            <button class="copy-btn" onclick="copyText('outputText')">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
            <button class="tweet-btn" onclick="tweet()">ğ•ã§ãƒã‚¹ãƒˆ</button>
            <button class="delete-btn" onclick="clearAll()">å…¨ã¦æ¶ˆå»</button>
        </div>
    </div>

    <script>
        const mapping = {'ã‚':'ã¬','ã„':'ã‚','ã†':'ã‚“','ãˆ':'ãˆ','ãŠ':'ãŠ','ã‹':'ã','ã':'ã','ã':'ã‘','ã‘':'ã“','ã“':'ã‹','ã•':'ã—','ã—':'ã™','ã™':'ã›','ã›':'ã','ã':'ã•','ãŸ':'ã¡','ã¡':'ã¤','ã¤':'ã¦','ã¦':'ã¨','ã¨':'ãŸ','ãª':'ã«','ã«':'ã¬','ã¬':'ã­','ã­':'ã®','ã®':'ãª','ã¯':'ã²','ã²':'ãµ','ãµ':'ã¸','ã¸':'ã»','ã»':'ã¯','ã¾':'ã¿','ã¿':'ã‚€','ã‚€':'ã‚','ã‚':'ã‚‚','ã‚‚':'ã¾','ã‚„':'ã‚†','ã‚†':'ã‚ˆ','ã‚ˆ':'ã‚„','ã‚‰':'ã‚Š','ã‚Š':'ã‚‹','ã‚‹':'ã‚Œ','ã‚Œ':'ã‚','ã‚':'ã‚‰','ã‚':'ã‚’','ã‚’':'ã‚“','ã‚“':'ã‚','0':'â¦°','1':'â¦‘','2':'â¦’','3':'â¦“','4':'â¦”','5':'â¦•','6':'â¦–','7':'â¦—','8':'â¦˜','9':'â¦™'};
        const rev = Object.fromEntries(Object.entries(mapping).map(([k,v])=>[v,k]));
        function updateTheme(val) { document.documentElement.style.setProperty('--val', val); }
        function updateCounter() { document.getElementById('charCount').textContent = Array.from(document.getElementById('inputText').value).length + " æ–‡å­—"; updateDiff(); }
        function updateDiff() {
            const inLen = Array.from(document.getElementById('inputText').value).length, outLen = Array.from(document.getElementById('outputText').value).length, diff = outLen - inLen, target = document.getElementById('diffDisplay');
            if (inLen === 0 && outLen === 0) { target.textContent = "Â±0"; target.style.color = "gray"; }
            else if (diff > 0) { target.textContent = "+" + diff; target.style.color = "#ff4d4d"; }
            else if (diff < 0) { target.textContent = diff; target.style.color = "#4da6ff"; }
            else { target.textContent = "Â±0"; target.style.color = "gray"; }
        }
        function process(m) {
            const input = document.getElementById('inputText').value, d = (m === 'encrypt') ? mapping : rev;
            let res = ""; for (let c of Array.from(input)) { let h = c.replace(/[\u30a1-\u30f6]/g, s => String.fromCharCode(s.charCodeAt(0) - 0x60)); res += (d[h] || d[c] || c); }
            document.getElementById('outputText').value = res; updateDiff();
        }
        function swapText() { const i = document.getElementById('inputText'), o = document.getElementById('outputText'); [i.value, o.value] = [o.value, i.value]; updateCounter(); }
        function copyText(id) { const t = document.getElementById(id); if(!t.value) return; t.select(); document.execCommand('copy'); alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼"); }
        function clearAll() { if(confirm("ã™ã¹ã¦æ¶ˆå»ã—ã¾ã™ã‹ï¼Ÿ")) { document.getElementById('inputText').value=''; document.getElementById('outputText').value=''; updateCounter(); } }
        function tweet() { const t = document.getElementById('outputText').value; if(!t) return; window.open(`https://twitter.com/intent/tweet?text=` + encodeURIComponent(`ã‚®ã‚¢ã‚ªã‚¿ãƒƒãƒ‰æš—å·ã€${t}ã€\nhttps://tadano-ippanzin.github.io/gearOtad/\n#ã‚®ã‚¢ã‚ªã‚¿ãƒƒãƒ‰æš—å·`), '_blank'); }
    </script>
</body>
</html>
