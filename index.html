<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gearOtad - „ÇÆ„Ç¢„Ç™„Çø„ÉÉ„ÉâÊöóÂè∑</title>
    <link rel="icon" href="https://assets.st-note.com/img/1766740914-5chXSxNAGbfo69q2YEz70pn1.png?width=500&height=500&fit=crop" type="image/png">
    <style>
        :root { --val: 30; }
        body { font-family: 'Segoe UI', sans-serif; text-align: center; padding: 20px; background-color: rgb(var(--val), var(--val), var(--val)); color: rgb(calc(255 - var(--val)), calc(255 - var(--val)), calc(255 - var(--val))); transition: 0.3s; margin: 0; overflow-x: hidden; min-height: 100vh; }
        .bg-gear { position: fixed; bottom: -10vmin; right: -10vmin; font-size: 80vmin; z-index: -1; opacity: 0.05; user-select: none; pointer-events: none; color: rgb(calc(255 - var(--val)), calc(255 - var(--val)), calc(255 - var(--val))); animation: spin 60s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .mode-slider-container { margin: 10px 0 20px 0; display: flex; align-items: center; justify-content: center; gap: 10px; font-weight: bold; }
        input[type="range"] { width: 200px; cursor: pointer; accent-color: #6f42c1; }
        .container { max-width: 600px; margin: auto; padding: 30px 20px; border-radius: 16px; background-color: rgba(calc(var(--val) + 15), calc(var(--val) + 15), calc(var(--val) + 15), 0.85); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); box-shadow: 0 15px 35px rgba(0,0,0,0.4); border: 1px solid rgba(128,128,128,0.2); }
        .logo-wrapper { margin-bottom: 20px; }
        .main-logo { max-width: 350px; width: 95%; height: auto; filter: drop-shadow(0 0 10px rgba(255,255,255, calc((255 - var(--val)) / 1200))); transition: 0.3s; }
        textarea { width: 95%; height: 120px; margin: 15px auto; padding: 15px; border-radius: 8px; font-size: 16px; box-sizing: border-box; display: block; background-color: rgba(calc(var(--val) - 10), calc(var(--val) - 10), calc(var(--val) - 10), 0.9); color: rgb(calc(255 - var(--val)), calc(255 - var(--val)), calc(255 - var(--val))); border: 2px solid rgba(128,128,128,0.3); transition: 0.2s; resize: vertical; }
        .history-container { margin: 10px 0; }
        select { width: 95%; padding: 10px; border-radius: 8px; background: rgba(calc(var(--val) + 20), calc(var(--val) + 20), calc(var(--val) + 20), 0.9); color: rgb(calc(255 - var(--val)), calc(255 - var(--val)), calc(255 - var(--val))); border: 1px solid rgba(128,128,128,0.5); cursor: pointer; }
        .btn-group { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        button { padding: 12px 18px; font-size: 15px; cursor: pointer; border-radius: 8px; transition: 0.3s; font-weight: bold; background-color: rgb(calc(255 - var(--val)), calc(255 - var(--val)), calc(255 - var(--val))); color: rgb(var(--val), var(--val), var(--val)); border: 1px solid rgba(128,128,128,0.5); }
        button:hover { transform: translateY(-2px); filter: brightness(0.8); }
        .swap-btn { border: 2px solid #6f42c1; } 
        .tweet-btn { background-color: #000; color: #fff; border: 1px solid #555; }
        .label { font-weight: bold; display: block; margin-top: 15px; text-align: left; margin-left: 2.5%; font-size: 0.9em; opacity: 0.8; }
        hr { border: 0; border-top: 1px solid rgba(128,128,128,0.3); margin: 25px 0; }
        .counter { text-align: right; font-size: 12px; margin-right: 2.5%; margin-top: -8px; margin-bottom: 10px; opacity: 0.7; }
        .diff-counter { font-family: monospace; font-weight: bold; }
    </style>
</head>
<body>
    <div class="bg-gear" id="gear">‚öôÔ∏è</div>
    <div class="mode-slider-container">
        <span>„ÉÄ„Éº„ÇØ„Çµ„Ç§„Éâ</span>
        <input type="range" id="themeSlider" min="30" max="250" value="30" oninput="updateTheme(this.value)">
        <span>„É©„Ç§„Éà„Çµ„Ç§„Éâ</span>
    </div>
    <div class="container">
        <div class="logo-wrapper">
            <img src="https://assets.st-note.com/production/uploads/images/239016490/rectangle_large_type_2_c160e3917400173cbde2ae9e19b03d89.png?width=2000&height=2000&fit=bounds&quality=85" alt="gearOtad" class="main-logo">
        </div>
        <div class="history-container">
            <select id="historySelect" onchange="loadHistory()">
                <option value="">-- Â§âÊèõÂ±•Ê≠¥ --</option>
            </select>
        </div>
        <span class="label">ÂÖ•Âäõ:</span>
        <textarea id="inputText" placeholder="„Åì„Åì„Å´„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ..." oninput="updateCounter()"></textarea>
        <div id="charCount" class="counter">0 ÊñáÂ≠ó</div>
        <div class="btn-group">
            <button onclick="process('encrypt')">ÊöóÂè∑Âåñ</button>
            <button onclick="process('decrypt')">Âæ©Âè∑Âåñ</button>
            <button class="swap-btn" onclick="swapText()">ÂÖ•„ÇåÊèõ„Åà„Çã</button>
        </div>
        <hr>
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0 2.5%;">
            <span class="label" style="margin-left: 0;">ÁµêÊûú:</span>
            <span id="diffDisplay" class="diff-counter" style="color: gray; margin-top: 15px;">¬±0</span>
        </div>
        <textarea id="outputText" readonly placeholder="ÁµêÊûú„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô..."></textarea>
        <div class="btn-group">
            <button onclick="copyText('outputText')">ÁµêÊûú„Çí„Ç≥„Éî„Éº</button>
            <button class="tweet-btn" onclick="tweet()">ùïè„Åß„Éù„Çπ„Éà</button>
            <button onclick="clearAll()">ÂÖ®„Å¶Ê∂àÂéª</button>
        </div>
    </div>
    <script>
        const mapping = {'„ÅÇ':'„Å¨','„ÅÑ':'„Çè','„ÅÜ':'„Çì','„Åà':'„Åà','„Åä':'„Åä','„Åã':'„Åç','„Åç':'„Åè','„Åè':'„Åë','„Åë':'„Åì','„Åì':'„Åã','„Åï':'„Åó','„Åó':'„Åô','„Åô':'„Åõ','„Åõ':'„Åù','„Åù':'„Åï','„Åü':'„Å°','„Å°':'„Å§','„Å§':'„Å¶','„Å¶':'„Å®','„Å®':'„Åü','„Å™':'„Å´','„Å´':'„Å¨','„Å¨':'„Å≠','„Å≠':'„ÅÆ','„ÅÆ':'„Å™','„ÅØ':'„Å≤','„Å≤':'„Åµ','„Åµ':'„Å∏','„Å∏':'„Åª','„Åª':'„ÅØ','„Åæ':'„Åø','„Åø':'„ÇÄ','„ÇÄ':'„ÇÅ','„ÇÅ':'„ÇÇ','„ÇÇ':'„Åæ','„ÇÑ':'„ÇÜ','„ÇÜ':'„Çà','„Çà':'„ÇÑ','„Çâ':'„Çä','„Çä':'„Çã','„Çã':'„Çå','„Çå':'„Çç','„Çç':'„Çâ','„Çè':'„Çí','„Çí':'„Çì','„Çì':'„Çè','0':'‚¶∞','1':'‚¶ë','2':'‚¶í','3':'‚¶ì','4':'‚¶î','5':'‚¶ï','6':'‚¶ñ','7':'‚¶ó','8':'‚¶ò','9':'‚¶ô'};
        const rev = Object.fromEntries(Object.entries(mapping).map(([k,v])=>[v,k]));
        let history = JSON.parse(localStorage.getItem('go_history') || '[]');

        function updateTheme(val) { document.documentElement.style.setProperty('--val', val); }
        function updateCounter() { document.getElementById('charCount').textContent = Array.from(document.getElementById('inputText').value).length + " ÊñáÂ≠ó"; updateDiff(); }
        function updateDiff() {
            const i = Array.from(document.getElementById('inputText').value).length, o = Array.from(document.getElementById('outputText').value).length, d = o - i, t = document.getElementById('diffDisplay');
            t.textContent = (d > 0 ? "+" : "") + d; t.style.color = d === 0 ? "gray" : (d > 0 ? "#ff4d4d" : "#4da6ff");
        }
        function process(m) {
            const input = document.getElementById('inputText').value, d = (m === 'encrypt') ? mapping : rev;
            let res = ""; for (let c of Array.from(input)) { let h = c.replace(/[\u30a1-\u30f6]/g, s => String.fromCharCode(s.charCodeAt(0) - 0x60)); res += (d[h] || d[c] || c); }
            document.getElementById('outputText').value = res; updateDiff();
            if(res && m === 'encrypt') saveHistory(input, res);
        }
        function saveHistory(i, o) {
            history.unshift({i, o, t: new Date().toLocaleTimeString()});
            history = history.slice(0, 10);
            localStorage.setItem('go_history', JSON.stringify(history));
            renderHistory();
        }
        function renderHistory() {
            const s = document.getElementById('historySelect');
            s.innerHTML = '<option value="">-- Â§âÊèõÂ±•Ê≠¥ --</option>';
            history.forEach((h, i) => { s.innerHTML += `<option value="${i}">${h.t}: ${h.i.substring(0,10)}...</option>`; });
        }
        function loadHistory() {
            const i = document.getElementById('historySelect').value;
            if(i !== "") { document.getElementById('inputText').value = history[i].i; document.getElementById('outputText').value = history[i].o; updateCounter(); }
        }
        function swapText() { const i = document.getElementById('inputText'), o = document.getElementById('outputText'); [i.value, o.value] = [o.value, i.value]; updateCounter(); }
        function copyText(id) { const t = document.getElementById(id); if(!t.value) return; t.select(); document.execCommand('copy'); }
        function clearAll() { if(confirm("Ê∂àÂéªÔºü")) { document.getElementById('inputText').value=''; document.getElementById('outputText').value=''; updateCounter(); } }
        function tweet() { const t = document.getElementById('outputText').value; if(!t) return; window.open(`https://twitter.com/intent/tweet?text=` + encodeURIComponent(`„ÇÆ„Ç¢„Ç™„Çø„ÉÉ„ÉâÊöóÂè∑„Äé${t}„Äè\nhttps://tadano-ippanzin.github.io/gearOtad/`), '_blank'); }
        renderHistory();
    </script>
</body>
</html>
